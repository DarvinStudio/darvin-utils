{% macro div_data(data, name, trans_domain = 'messages') %}{{ utils_data_block(data, name, trans_domain) }}{% endmacro %}

{% macro table_data(data, name, trans_domain = 'messages') %}{{ utils_data_table(data, name, trans_domain) }}{% endmacro %}

{% macro plain_data(data, trans_prefix, trans_domain) %}

    {%- import _self as that -%}

    {%- for name, value in data -%}

        {%- set property = that.plain_property(name, '.' in name ? name : (trans_prefix ~ name), value, trans_domain)|trim -%}

        {%- if property is not same as('') %}

{{ property -}}

        {%- endif -%}

    {%- endfor -%}

{% endmacro %}

{% macro plain_property(name, title, value, trans_domain) %}

    {%- if value is not same as(null) and value is not same as('') and not (value is iterable and value is empty) -%}

        {%- import _self as that -%}

        {%- if trans_domain is defined -%}

            {%- trans_default_domain trans_domain -%}

        {%- endif -%}

        {%- if name -%}

            {%- if value is iterable -%}
                {{- (title ~ '.title')|trans -}}
            {%- else -%}
                {{- title|trans -}}
            {%- endif -%}

            {{- ' - ' -}}

        {%- endif -%}

        {%- if value is iterable -%}

            {%- set keys = value|keys -%}

            {%- if keys is same as(keys|keys) -%}

                {%- for item_name, item_value in value -%}

                    {{- that.plain_property(null, title, item_value, trans_domain) -}}

                    {%- if not loop.last -%}
                        {{- ', ' -}}
                    {%- endif -%}

                {%- endfor -%}

            {%- else -%}

                {%- for item_name, item_value in value -%}

                    {{- that.plain_property(item_name, '.' in item_name ? item_name : (title ~ '.item.' ~ item_name), item_value, trans_domain) -}}

                    {%- if not loop.last -%}
                        {{- ', ' -}}
                    {%- endif -%}

                {%- endfor -%}

            {%- endif -%}

        {%- elseif value is same as(true) or value is same as(false) -%}
            {{- ('boolean.' ~ (value ? 'yes' : 'no'))|trans -}}
        {%- else -%}
            {{- value|trans|striptags -}}
        {%- endif -%}

    {%- endif -%}

{% endmacro %}
