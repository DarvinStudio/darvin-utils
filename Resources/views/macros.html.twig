{% macro div_data(data, name, trans_domain = 'messages') %}

    {% set view = data|utils_data_to_view(name, trans_domain) %}

    {% if view %}

        {{ _self.div_data_view(view) }}

    {% endif %}

{% endmacro %}

{% macro div_data_view(view) %}
    <div class="details-list__property">

        {% if view.hasTitle %}
            <span class="details-list__property-name"
                  style="font-family: Arial, sans-serif; font-size: 15px; line-height: 23px; color: #7e7e7e;">
                {{ view.title }}
            </span>
        {% endif %}

        <span class="details-list__property-value"
              style="font-family: Arial, sans-serif; font-size: 15px; line-height: 23px; color: #333333;">

            {% if view.hasChildren %}

                {% if view.associative %}
                    <ul>

                        {% for child in view.children %}
                            <li>{{ _self.div_data_view(child) }}</li>
                        {% endfor %}

                    </ul>
                {% else %}
                    <ol>

                        {% for child in view.children %}
                            <li>{{ _self.div_data_view(child) }}</li>
                        {% endfor %}

                    </ol>
                {% endif %}

            {% endif %}

            {% if view.hasValue %}

                {% if view.hasUrl %}
                    <a href="{{ view.url }}"
                       style="font-family: Arial, sans-serif; font-size: 15px; line-height: 23px; color: #333333;">
                        {{ view.value }}
                    </a>
                {% else %}
                    {{ view.value|raw }}
                {% endif %}

            {% endif %}

        </span>
    </div>
{% endmacro %}

{% macro plain_data(data, trans_prefix, trans_domain) %}

    {%- import _self as that -%}

    {%- for name, value in data -%}

        {%- set property = that.plain_property(name, '.' in name ? name : (trans_prefix ~ name), value, trans_domain)|trim -%}

        {%- if property is not same as('') %}

{{ property -}}

        {%- endif -%}

    {%- endfor -%}

{% endmacro %}

{% macro plain_property(name, title, value, trans_domain) %}

    {%- if value is not same as(null) and value is not same as('') and not (value is iterable and value is empty) -%}

        {%- import _self as that -%}

        {%- if trans_domain is defined -%}

            {%- trans_default_domain trans_domain -%}

        {%- endif -%}

        {%- if name -%}

            {%- if value is iterable -%}
                {{- (title ~ '.title')|trans -}}
            {%- else -%}
                {{- title|trans -}}
            {%- endif -%}

            {{- ' - ' -}}

        {%- endif -%}

        {%- if value is iterable -%}

            {%- set keys = value|keys -%}

            {%- if keys is same as(keys|keys) -%}

                {%- for item_name, item_value in value -%}

                    {{- that.plain_property(null, title, item_value, trans_domain) -}}

                    {%- if not loop.last -%}
                        {{- ', ' -}}
                    {%- endif -%}

                {%- endfor -%}

            {%- else -%}

                {%- for item_name, item_value in value -%}

                    {{- that.plain_property(item_name, '.' in item_name ? item_name : (title ~ '.item.' ~ item_name), item_value, trans_domain) -}}

                    {%- if not loop.last -%}
                        {{- ', ' -}}
                    {%- endif -%}

                {%- endfor -%}

            {%- endif -%}

        {%- elseif value is same as(true) or value is same as(false) -%}
            {{- ('boolean.' ~ (value ? 'yes' : 'no'))|trans -}}
        {%- else -%}
            {{- value|trans|striptags -}}
        {%- endif -%}

    {%- endif -%}

{% endmacro %}

{% macro table_data(data, name, trans_domain = 'messages') %}

    {% set view = data|utils_data_to_view(name, trans_domain) %}

    {% if view and view.hasChildren %}
        <table>

            {% for child in view.children %}

                {{ _self.table_data_view(child) }}

            {% endfor %}

        </table>
    {% endif %}

{% endmacro %}

{% macro table_data_view(view) %}
    <tr>

        {% if view.hasTitle %}
            <th>{{ view.title }}</th>
        {% endif %}

        <td>

            {% if view.hasChildren %}
                <table>

                    {% for child in view.children %}

                        {{ _self.table_data_view(child) }}

                    {% endfor %}

                </table>
            {% endif %}

            {% if view.hasValue %}

                {% if view.hasUrl %}
                    <a href="{{ view.url }}"
                       style="font-family: Arial, sans-serif; font-size: 15px; line-height: 23px; color: #333333;">
                        {{ view.value }}
                    </a>
                {% else %}
                    {{ view.value|raw }}
                {% endif %}

            {% endif %}

        </td>
    <tr>
{% endmacro %}
